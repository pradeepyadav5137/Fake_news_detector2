# TruthLens System Architecture Diagram

## High-Level System Architecture

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                           TruthLens AI News Authenticator                   │
└─────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────┐
│                              Presentation Layer                             │
├─────────────────────────────────────────────────────────────────────────────┤
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐       │
│  │   Article   │  │   Results   │  │ Analytics   │  │    API      │       │
│  │   Input     │  │   Display   │  │ Dashboard   │  │   Status    │       │
│  │   Form      │  │   Component │  │  Component  │  │  Monitor    │       │
│  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘       │
│         │                │                │                │               │
│         └────────────────┼────────────────┼────────────────┘               │
│                          │                │                                │
└──────────────────────────┼────────────────┼────────────────────────────────┘
                           │                │
┌──────────────────────────┼────────────────┼────────────────────────────────┐
│                         Business Logic Layer                               │
├─────────────────────────────────────────────────────────────────────────────┤
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐       │
│  │    Text     │  │   Machine   │  │     API     │  │ Analytics   │       │
│  │ Processing  │  │  Learning   │  │ Integration │  │   Engine    │       │
│  │   Module    │  │ Classifier  │  │   Manager   │  │             │       │
│  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘       │
│         │                │                │                │               │
│    ┌────▼────┐      ┌────▼────┐      ┌────▼────┐      ┌────▼────┐        │
│    │ Clean   │      │ Model   │      │ Query   │      │  Stats  │        │
│    │ Text    │      │ Predict │      │ Builder │      │ Logger  │        │
│    └─────────┘      └─────────┘      └─────────┘      └─────────┘        │
│         │                │                │                │               │
└─────────┼────────────────┼────────────────┼────────────────┼───────────────┘
          │                │                │                │
┌─────────┼────────────────┼────────────────┼────────────────┼───────────────┐
│                           Data Access Layer                                │
├─────────────────────────────────────────────────────────────────────────────┤
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐       │
│  │    Model    │  │     Log     │  │    Cache    │  │     API     │       │
│  │   Loading   │  │ Management  │  │ Management  │  │    Client   │       │
│  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘       │
│         │                │                │                │               │
│    ┌────▼────┐      ┌────▼────┐      ┌────▼────┐      ┌────▼────┐        │
│    │model95  │      │log.csv  │      │Response │      │HTTP     │        │
│    │.jb      │      │         │      │Cache    │      │Requests │        │
│    └─────────┘      └─────────┘      └─────────┘      └─────────┘        │
│         │                │                │                │               │
└─────────┼────────────────┼────────────────┼────────────────┼───────────────┘
          │                │                │                │
┌─────────┼────────────────┼────────────────┼────────────────┼───────────────┐
│                          External Services Layer                           │
├─────────────────────────────────────────────────────────────────────────────┤
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐       │
│  │   NewsAPI   │  │  Bing News  │  │  Additional │  │  Analytics  │       │
│  │             │  │     API     │  │    News     │  │   Storage   │       │
│  │             │  │             │  │   Sources   │  │             │       │
│  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘       │
└─────────────────────────────────────────────────────────────────────────────┘
```

## Data Flow Architecture

```
┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│    User     │───▶│   Article   │───▶│    Text     │───▶│  Feature    │
│   Input     │    │   Capture   │    │ Cleaning &  │    │ Extraction  │
│             │    │             │    │ Processing  │    │             │
└─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘
                                                                  │
┌─────────────┐    ┌─────────────┐    ┌─────────────┐            │
│   Result    │◀───│  Response   │◀───│   Machine   │◀───────────┘
│  Display    │    │ Generation  │    │  Learning   │
│             │    │             │    │Prediction   │
└─────────────┘    └─────────────┘    └─────────────┘
       │                   ▲
       │                   │
       ▼                   │
┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│  Analytics  │    │  Source     │◀───│    API      │◀───│   Query     │
│   Update    │    │Verification │    │Integration  │    │ Generation  │
│             │    │             │    │             │    │             │
└─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘
```

## Machine Learning Pipeline

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                         Machine Learning Pipeline                           │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐ │
│  │    Raw      │───▶│  Text       │───▶│   Feature   │───▶│    Model    │ │
│  │   Article   │    │Preprocessing│    │ Extraction  │    │ Prediction  │ │
│  │    Text     │    │             │    │             │    │             │ │
│  └─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘ │
│         │                   │                   │                   │     │
│         ▼                   ▼                   ▼                   ▼     │
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐ │
│  │   Remove    │    │   Convert   │    │   TF-IDF    │    │ RandomForest│ │
│  │Punctuation  │    │ to Lowercase│    │Vectorization│    │ Classifier  │ │
│  │ & Numbers   │    │             │    │             │    │             │ │
│  └─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘ │
│         │                   │                   │                   │     │
│         ▼                   ▼                   ▼                   ▼     │
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐ │
│  │  Normalize  │    │   Remove    │    │   Feature   │    │ Confidence  │ │
│  │ Whitespace  │    │ Stop Words  │    │  Selection  │    │   Score     │ │
│  │             │    │             │    │             │    │ Calculation │ │
│  └─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘ │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

## API Integration Architecture

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                          API Integration Flow                               │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ┌─────────────┐                                                           │
│  │   Article   │                                                           │
│  │   Query     │                                                           │
│  │ Generation  │                                                           │
│  └──────┬──────┘                                                           │
│         │                                                                  │
│         ▼                                                                  │
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐ │
│  │   Parallel  │───▶│   NewsAPI   │    │ Bing News   │    │  Additional │ │
│  │ API Calls   │    │   Request   │    │ API Request │    │    APIs     │ │
│  │             │    │             │    │             │    │             │ │
│  └─────────────┘    └──────┬──────┘    └──────┬──────┘    └──────┬──────┘ │
│         │                   │                   │                   │     │
│         │                   ▼                   ▼                   ▼     │
│         │            ┌─────────────┐    ┌─────────────┐    ┌─────────────┐ │
│         │            │  Response   │    │  Response   │    │  Response   │ │
│         │            │ Processing  │    │ Processing  │    │ Processing  │ │
│         │            │             │    │             │    │             │ │
│         │            └──────┬──────┘    └──────┬──────┘    └──────┬──────┘ │
│         │                   │                   │                   │     │
│         ▼                   │                   │                   │     │
│  ┌─────────────┐            │                   │                   │     │
│  │   Error     │            │                   │                   │     │
│  │  Handling   │            ▼                   ▼                   ▼     │
│  │ & Fallback  │     ┌─────────────────────────────────────────────────┐  │
│  └─────────────┘     │            Result Aggregation                  │  │
│         │             │          & Source Verification                │  │
│         │             └─────────────────────────────────────────────────┘  │
│         │                                    │                             │
│         └────────────────────────────────────┘                             │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

## Component Interaction Diagram

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                       Component Interaction Flow                            │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│ [User Interface]                                                            │
│        │                                                                    │
│        │ submit_article()                                                   │
│        ▼                                                                    │
│ [Input Validator] ─────────────────┐                                       │
│        │                           │                                       │
│        │ validate_text()           │ log_input()                           │
│        ▼                           ▼                                       │
│ [Text Processor] ──────────▶ [Analytics Logger]                            │
│        │                           ▲                                       │
│        │ clean_text()              │                                       │
│        ▼                           │                                       │
│ [Feature Extractor]                │                                       │
│        │                           │                                       │
│        │ extract_features()        │                                       │
│        ▼                           │                                       │
│ [ML Classifier] ───────────────────┤                                       │
│        │                           │                                       │
│        │ predict()                 │ log_prediction()                      │
│        ▼                           │                                       │
│ [Confidence Calculator]            │                                       │
│        │                           │                                       │
│        │ calculate_score()         │                                       │
│        ▼                           │                                       │
│ [Query Generator] ─────────────────┤                                       │
│        │                           │                                       │
│        │ generate_query()          │                                       │
│        ▼                           │                                       │
│ [API Manager] ─────────────────────┤                                       │
│        │                           │                                       │
│        │ fetch_sources()           │ log_api_calls()                       │
│        ▼                           │                                       │
│ [Source Validator] ────────────────┤                                       │
│        │                           │                                       │
│        │ validate_sources()        │                                       │
│        ▼                           │                                       │
│ [Result Aggregator] ───────────────┘                                       │
│        │                                                                   │
│        │ combine_results()                                                 │
│        ▼                                                                   │
│ [Result Formatter]                                                         │
│        │                                                                   │
│        │ format_output()                                                   │
│        ▼                                                                   │
│ [Display Manager]                                                          │
│        │                                                                   │
│        │ render_results()                                                  │
│        ▼                                                                   │
│ [User Interface]                                                           │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

## Database Schema Diagram

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                           Data Storage Schema                               │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│ ┌─────────────────────────────────────┐                                     │
│ │         prediction_logs             │                                     │
│ ├─────────────────────────────────────┤                                     │
│ │ id (PK)              INTEGER        │                                     │
│ │ timestamp            DATETIME       │                                     │
│ │ article_text         TEXT           │                                     │
│ │ prediction           VARCHAR(10)    │                                     │
│ │ confidence           DECIMAL(5,2)   │                                     │
│ │ references_found     INTEGER        │                                     │
│ │ api_sources          TEXT           │                                     │
│ │ processing_time      DECIMAL(8,3)   │                                     │
│ │ user_session         VARCHAR(100)   │                                     │
│ └─────────────────────────────────────┘                                     │
│                      │                                                      │
│                      │ FK relationship                                      │
│                      ▼                                                      │
│ ┌─────────────────────────────────────┐                                     │
│ │          api_usage                  │                                     │
│ ├─────────────────────────────────────┤                                     │
│ │ id (PK)              INTEGER        │                                     │
│ │ timestamp            DATETIME       │                                     │
│ │ api_name             VARCHAR(50)    │                                     │
│ │ endpoint             VARCHAR(200)   │                                     │
│ │ status_code          INTEGER        │                                     │
│ │ response_time        DECIMAL(8,3)   │                                     │
│ │ success              BOOLEAN        │                                     │
│ └─────────────────────────────────────┘                                     │
│                      │                                                      │
│                      │ FK relationship                                      │
│                      ▼                                                      │
│ ┌─────────────────────────────────────┐                                     │
│ │        model_metrics                │                                     │
│ ├─────────────────────────────────────┤                                     │
│ │ id (PK)              INTEGER        │                                     │
│ │ timestamp            DATETIME       │                                     │
│ │ accuracy             DECIMAL(5,4)   │                                     │
│ │ precision_score      DECIMAL(5,4)   │                                     │
│ │ recall_score         DECIMAL(5,4)   │                                     │
│ │ f1_score             DECIMAL(5,4)   │                                     │
│ │ total_predictions    INTEGER        │                                     │
│ └─────────────────────────────────────┘                                     │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

## Deployment Architecture

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                         Deployment Architecture                             │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│ ┌─────────────────────────────────────────────────────────────────────────┐ │
│ │                        Load Balancer                                   │ │
│ │                      (Nginx/Apache)                                    │ │
│ └─────────────────────────┬───────────────────────────────────────────────┘ │
│                           │                                                 │
│           ┌───────────────┼───────────────┐                                 │
│           │               │               │                                 │
│           ▼               ▼               ▼                                 │
│ ┌─────────────┐ ┌─────────────┐ ┌─────────────┐                           │
│ │ Application │ │ Application │ │ Application │                           │
│ │ Instance 1  │ │ Instance 2  │ │ Instance 3  │                           │
│ │             │ │             │ │             │                           │
│ │ Streamlit   │ │ Streamlit   │ │ Streamlit   │                           │
│ │ + ML Model  │ │ + ML Model  │ │ + ML Model  │                           │
│ └─────────────┘ └─────────────┘ └─────────────┘                           │
│           │               │               │                                 │
│           └───────────────┼───────────────┘                                 │
│                           │                                                 │
│                           ▼                                                 │
│ ┌─────────────────────────────────────────────────────────────────────────┐ │
│ │                     Shared Storage                                      │ │
│ │                   (Model Files & Logs)                                 │ │
│ └─────────────────────────────────────────────────────────────────────────┘ │
│                           │                                                 │
│                           ▼                                                 │
│ ┌─────────────────────────────────────────────────────────────────────────┐ │
│ │                    External APIs                                        │ │
│ │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐                     │ │
│ │  │   NewsAPI   │  │  Bing News  │  │  Additional │                     │ │
│ │  │             │  │     API     │  │    APIs     │                     │ │
│ │  └─────────────┘  └─────────────┘  └─────────────┘                     │ │
│ └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```